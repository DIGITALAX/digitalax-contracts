type GenesisContributor @entity {
  id: ID!
  contributor: Bytes! # address
  totalContribtuionInWei: BigInt!
  firstContributedTimestamp: BigInt!
  lastContributedTimestamp: BigInt!
}

type DigitalaxGenesisContract @entity {
  id: ID!
  accessControls: Bytes!
  fundsMultisig: Bytes!
  genesisStart: BigInt!
  genesisEnd: BigInt!
  minimumContributionAmount: BigInt!
  maximumContributionAmount: BigInt!
  totalContributions: BigInt!
}

type DigitalaxMaterialOwner @entity {
  id: ID!
  amount: BigInt!
  contract: Bytes!
  tokenUri: String!
}

type DigitalaxGarment @entity {
  id: ID!
  designer: Bytes!
  owner: Bytes!
  primarySalePrice: BigInt!
  tokenUri: String!
  strands: [DigitalaxMaterialOwner!]!
  collector: DigitalaxCollector
}

type DigitalaxMaterial @entity {
  id: ID!
  tokenUri: String!
  totalSupply: BigInt!
}

type DigitalaxCollector @entity {
  id: ID!
  garmentsOwned: [DigitalaxGarment!]!
  gOwned: [DigitalaxGarment!]! @derivedFrom(field: "collector")
  strandsOwned: [DigitalaxMaterialOwner!]!
}

type DigitalaxGarmentDesigner @entity {
  id: ID!
  garments: [DigitalaxGarment!]!
  listings: [DigitalaxGarmentAuction!]!
  # sold
}

type DigitalaxAuctionConfig @entity {
  ## Global config
  id: ID!
  minBidIncrement: BigInt!
  bidWithdrawalLockTime: BigInt!
  platformFee: BigInt!
  platformFeeRecipient: Bytes!
  ## totals
  totalSales: BigInt!
}

type DigitalaxGarmentAuction @entity {
  id: ID!

  ## Auction setup
  reservePrice: BigInt!
  startTime: BigInt!
  endTime: BigInt!
  lister: Bytes!
  resulted: Boolean!

  ## Highest bidder
  address: Bytes
  bid: BigInt
  lastBidTime: BigInt
}
